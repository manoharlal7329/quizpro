<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password — QuizPro Arena</title>
    <link rel="stylesheet" href="/css/style.css?v=1.3">
</head>

<body style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;">
    <div class="glass-card" style="max-width: 400px; width: 100%; padding: 40px; border-radius: 24px;">
        <h2 style="margin-bottom: 8px;">Naya Password Set Karein</h2>
        <p style="color: var(--muted); font-size: .9rem; margin-bottom: 30px;">Apna naya password niche enter karein.
        </p>

        <div class="form-group">
            <label>New Password</label>
            <input type="password" id="newPass" placeholder="••••••••">
        </div>

        <button class="btn btn-primary btn-full" onclick="resetPass()"
            style="padding: 16px; border-radius: 12px; font-weight: 700;">
            Update Password
        </button>

        <p id="msg" style="margin-top: 20px; text-align: center; font-size: .85rem; display: none;"></p>
    </div>

    <script src="/js/common.js?v=1.3"></script>
    <script>
        async function resetPass() {
            const params = new URLSearchParams(window.location.search);
            const token = params.get('token');
            const newPassword = document.getElementById('newPass').value;
            const msg = document.getElementById('msg');

            if (!newPassword || newPassword.length < 6) {
                toast('Password must be at least 6 characters long', 'error');
                return;
            }

            try {
                const res = await api('/api/auth/reset-password', 'POST', { token, newPassword });
                msg.style.display = 'block';
                msg.style.color = 'var(--green)';
                msg.textContent = res.message;
                toast('✅ Success!', 'success');
                setTimeout(() => window.location.href = '/login.html', 2000);
            } catch (e) {
                toast(e.message, 'error');
            }
        }
    </script>
</body>

</html>